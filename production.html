<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YChart Editor - Interactive Org Chart</title>
    
    <!-- Load YChart Editor CSS and JS from dist -->
    <link rel="stylesheet" href="./dist/ychart-editor.css">
    <script src="./dist/ychart-editor.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            height: 100vh;
            overflow: hidden;
            background: var(--yc-gradient-primary);
        }

        .app-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            background: var(--yc-gradient-header-dark);
            backdrop-filter: var(--yc-backdrop-blur);
            padding: 1.5rem 2rem;
            box-shadow: var(--yc-shadow-header);
            z-index: 10;
            flex-shrink: 0;
            position: relative;
        }

        header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--yc-gradient-rainbow);
            background-size: 200% 100%;
            animation: rainbow 3s linear infinite;
        }

        @keyframes rainbow {
            0% {
                background-position: 0% 0%;
            }
            100% {
                background-position: 200% 0%;
            }
        }

        header h1 {
            font-size: 2rem;
            font-weight: 800;
            background: var(--yc-gradient-title-light);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        header p {
            color: var(--yc-color-header-subtext);
            font-size: 1rem;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .header-left {
            flex: 1;
        }

        .git-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 0.85rem;
            padding-top: 0.5rem;
        }

        .git-info a {
            color: var(--yc-color-overlay-white-90);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.3rem;
            transition: color 0.2s;
        }

        .git-info a:hover {
            color: var(--yc-color-text-inverse);
            text-decoration: underline;
        }

        .git-info svg {
            width: 16px;
            height: 16px;
            fill: currentColor;
        }

        .commit-hash {
            font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Monaco, monospace;
            background: var(--yc-color-overlay-white-15);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
        }

        .ychart-wrapper {
            flex: 1;
            background: var(--yc-color-bg-card);
            margin: 1rem;
            border-radius: 12px;
            box-shadow: var(--yc-shadow-wrapper);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }
        
        #ychart-container {
            flex: 1;
            overflow: hidden;
            min-height: 0;
        }
        
        /* Ensure CodeMirror editor can scroll properly */
        #ychart-editor {
            height: 100% !important;
            overflow: hidden !important;
        }
        
        #ychart-editor .cm-editor {
            height: 100% !important;
        }
        
        #ychart-editor .cm-scroller {
            overflow-y: auto !important;
            max-height: 100% !important;
        }

        .footer {
            text-align: center;
            padding: 1rem;
            color: var(--yc-color-text-inverse);
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .footer a {
            color: var(--yc-color-text-inverse);
            text-decoration: none;
            font-weight: 600;
        }

        .footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header>
            <div class="header-content">
                <div class="header-left">
                    <h1>üåü YChart Editor</h1>
                    <p>Interactive Organizational Chart Editor with Real-time YAML Editing</p>
                </div>
                <div class="git-info">
                    <a id="repo-link" href="https://github.com/mieweb/ychart" target="_blank" rel="noopener noreferrer" title="View repository on GitHub">
                        <svg viewBox="0 0 16 16" aria-hidden="true"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
                        Repo
                    </a>
                    <a id="commit-link" href="#" target="_blank" rel="noopener noreferrer" title="View this commit on GitHub">
                        <span class="commit-hash" id="commit-hash">loading...</span>
                    </a>
                </div>
            </div>
        </header>

        <div class="ychart-wrapper">
            <div id="ychart-container"></div>
        </div>

        <div class="footer">
            Powered by YChart Editor | <a href="https://orgchart.opensource.mieweb.org/docs" target="_blank">Documentation</a> | <a href="https://github.com/mieweb/ychart" target="_blank">View on GitHub</a>
        </div>
    </div>

    <script>
        // Fetch and display git commit info from GitHub API
        (async function() {
            const repoUrl = 'https://github.com/mieweb/ychart';
            const apiUrl = 'https://api.github.com/repos/mieweb/ychart/commits?per_page=1';
            
            const commitHashEl = document.getElementById('commit-hash');
            const commitLinkEl = document.getElementById('commit-link');
            
            try {
                const response = await fetch(apiUrl);
                if (response.ok) {
                    const commits = await response.json();
                    if (commits && commits.length > 0) {
                        const commit = commits[0];
                        const shortHash = commit.sha.substring(0, 7);
                        
                        if (commitHashEl) {
                            commitHashEl.textContent = shortHash;
                        }
                        if (commitLinkEl) {
                            commitLinkEl.href = `${repoUrl}/commit/${commit.sha}`;
                            commitLinkEl.title = `View commit ${shortHash} on GitHub`;
                        }
                    }
                } else {
                    // Fallback if API fails
                    if (commitHashEl) {
                        commitHashEl.textContent = 'latest';
                    }
                }
            } catch (error) {
                // Fallback if fetch fails
                if (commitHashEl) {
                    commitHashEl.textContent = 'latest';
                }
            }
        })();

        // Generate impressive demo data
        const yamlData = `---
options:
  nodeWidth: 250
  nodeHeight: 140
  childrenMargin: 60
  compactMarginBetween: 40
  compactMarginPair: 35
  neighbourMargin: 25
schema:
  id: number | required
  name: string | required
  title: string | required
  department: string | optional
  email: string | required
  phone: string | optional
  location: string | optional
  supervisor: string | optional
card:
  - div:
      style: font-size:var(--yc-font-size-xl);font-weight:var(--yc-font-weight-bold);color:var(--yc-color-gray-900);margin-bottom:var(--yc-spacing-sm);letter-spacing:-0.5px;
      content: $name$
  - div:
      style: font-size:var(--yc-font-size-xs);color:var(--yc-color-primary);font-weight:var(--yc-font-weight-semibold);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:var(--yc-spacing-md);
      content: $title$
  - div:
      style: font-size:var(--yc-font-size-sm);color:var(--yc-color-icon);margin-bottom:var(--yc-spacing-xs);
      children:
        - span:
            style: font-weight:var(--yc-font-weight-semibold);color:var(--yc-color-text-heading);
            content: "üìß "
        - span:
            style: color:var(--yc-color-primary);
            content: $email$
  - div:
      style: font-size:var(--yc-font-size-xs);color:var(--yc-color-text-muted);margin-bottom:var(--yc-spacing-xxs);
      children:
        - span:
            style: font-weight:var(--yc-font-weight-semibold);
            content: "üìç "
        - span:
            content: $location$
  - div:
      style: font-size:var(--yc-font-size-xxs);color:var(--yc-color-text-light);margin-top:var(--yc-spacing-sm);padding-top:var(--yc-spacing-sm);border-top:var(--yc-border-width-thin) solid var(--yc-color-button-border);
      children:
        - span:
            style: font-weight:var(--yc-font-weight-semibold);
            content: "Reports to: "
        - span:
            content: $supervisor$
---

- id: 1
  name: Sarah Chen
  title: Chief Executive Officer
  department: Executive
  email: sarah.chen@company.com
  phone: +1 (555) 100-0001
  location: San Francisco, CA
  supervisor: Board of Directors
  parentId: null

- id: 2
  name: Michael Rodriguez
  title: Chief Technology Officer
  department: Technology
  email: michael.rodriguez@company.com
  phone: +1 (555) 100-0002
  location: San Francisco, CA
  supervisor: Sarah Chen
  parentId: 1

- id: 3
  name: Emily Watson
  title: Chief Financial Officer
  department: Finance
  email: emily.watson@company.com
  phone: +1 (555) 100-0003
  location: New York, NY
  supervisor: Sarah Chen
  parentId: 1

- id: 4
  name: David Kim
  title: Chief Marketing Officer
  department: Marketing
  email: david.kim@company.com
  phone: +1 (555) 100-0004
  location: Los Angeles, CA
  supervisor: Sarah Chen
  parentId: 1

- id: 5
  name: Jennifer Martinez
  title: VP of Engineering
  department: Technology
  email: jennifer.martinez@company.com
  phone: +1 (555) 100-0005
  location: San Francisco, CA
  supervisor: Michael Rodriguez
  parentId: 2

- id: 6
  name: Robert Taylor
  title: VP of Product
  department: Technology
  email: robert.taylor@company.com
  phone: +1 (555) 100-0006
  location: San Francisco, CA
  supervisor: Michael Rodriguez
  parentId: 2

- id: 7
  name: Lisa Anderson
  title: VP of Data Science
  department: Technology
  email: lisa.anderson@company.com
  phone: +1 (555) 100-0007
  location: Seattle, WA
  supervisor: Michael Rodriguez
  parentId: 2

- id: 8
  name: James Wilson
  title: Controller
  department: Finance
  email: james.wilson@company.com
  phone: +1 (555) 100-0008
  location: New York, NY
  supervisor: Emily Watson
  parentId: 3

- id: 9
  name: Maria Garcia
  title: Director of FP&A
  department: Finance
  email: maria.garcia@company.com
  phone: +1 (555) 100-0009
  location: New York, NY
  supervisor: Emily Watson
  parentId: 3

- id: 10
  name: Christopher Lee
  title: Director of Brand Marketing
  department: Marketing
  email: christopher.lee@company.com
  phone: +1 (555) 100-0010
  location: Los Angeles, CA
  supervisor: David Kim
  parentId: 4

- id: 11
  name: Amanda Brown
  title: Director of Growth Marketing
  department: Marketing
  email: amanda.brown@company.com
  phone: +1 (555) 100-0011
  location: Austin, TX
  supervisor: David Kim
  parentId: 4

- id: 12
  name: Daniel Thompson
  title: Senior Engineering Manager
  department: Technology
  email: daniel.thompson@company.com
  phone: +1 (555) 100-0012
  location: San Francisco, CA
  supervisor: Jennifer Martinez
  parentId: 5

- id: 13
  name: Jessica White
  title: Engineering Manager - Frontend
  department: Technology
  email: jessica.white@company.com
  phone: +1 (555) 100-0013
  location: San Francisco, CA
  supervisor: Jennifer Martinez
  parentId: 5

- id: 14
  name: Kevin Harris
  title: Engineering Manager - Backend
  department: Technology
  email: kevin.harris@company.com
  phone: +1 (555) 100-0014
  location: San Francisco, CA
  supervisor: Jennifer Martinez
  parentId: 5

- id: 15
  name: Michelle Clark
  title: Senior Product Manager
  department: Technology
  email: michelle.clark@company.com
  phone: +1 (555) 100-0015
  location: San Francisco, CA
  supervisor: Robert Taylor
  parentId: 6

- id: 16
  name: Ryan Lewis
  title: Product Manager
  department: Technology
  email: ryan.lewis@company.com
  phone: +1 (555) 100-0016
  location: Remote
  supervisor: Robert Taylor
  parentId: 6

- id: 17
  name: Samantha Walker
  title: Lead Data Scientist
  department: Technology
  email: samantha.walker@company.com
  phone: +1 (555) 100-0017
  location: Seattle, WA
  supervisor: Lisa Anderson
  parentId: 7

- id: 18
  name: Brian Hall
  title: ML Engineer
  department: Technology
  email: brian.hall@company.com
  phone: +1 (555) 100-0018
  location: Seattle, WA
  supervisor: Lisa Anderson
  parentId: 7

- id: 19
  name: Nicole Young
  title: Senior Accountant
  department: Finance
  email: nicole.young@company.com
  phone: +1 (555) 100-0019
  location: New York, NY
  supervisor: James Wilson
  parentId: 8

- id: 20
  name: Andrew King
  title: Financial Analyst
  department: Finance
  email: andrew.king@company.com
  phone: +1 (555) 100-0020
  location: New York, NY
  supervisor: Maria Garcia
  parentId: 9

- id: 21
  name: Rachel Wright
  title: Content Marketing Manager
  department: Marketing
  email: rachel.wright@company.com
  phone: +1 (555) 100-0021
  location: Los Angeles, CA
  supervisor: Christopher Lee
  parentId: 10

- id: 22
  name: Justin Scott
  title: Performance Marketing Manager
  department: Marketing
  email: justin.scott@company.com
  phone: +1 (555) 100-0022
  location: Austin, TX
  supervisor: Amanda Brown
  parentId: 11

- id: 23
  name: Laura Green
  title: Senior Software Engineer
  department: Technology
  email: laura.green@company.com
  phone: +1 (555) 100-0023
  location: San Francisco, CA
  supervisor: Daniel Thompson
  parentId: 12

- id: 24
  name: Marcus Adams
  title: Software Engineer
  department: Technology
  email: marcus.adams@company.com
  phone: +1 (555) 100-0024
  location: San Francisco, CA
  supervisor: Daniel Thompson
  parentId: 12

- id: 25
  name: Olivia Baker
  title: Frontend Engineer
  department: Technology
  email: olivia.baker@company.com
  phone: +1 (555) 100-0025
  location: Remote
  supervisor: Jessica White
  parentId: 13

- id: 26
  name: Ethan Nelson
  title: Backend Engineer
  department: Technology
  email: ethan.nelson@company.com
  phone: +1 (555) 100-0026
  location: San Francisco, CA
  supervisor: Kevin Harris
  parentId: 14

- id: 27
  name: Sophia Carter
  title: DevOps Engineer
  department: Technology
  email: sophia.carter@company.com
  phone: +1 (555) 100-0027
  location: Seattle, WA
  supervisor: Kevin Harris
  parentId: 14

- id: 28
  name: Tyler Mitchell
  title: UX Designer
  department: Technology
  email: tyler.mitchell@company.com
  phone: +1 (555) 100-0028
  location: San Francisco, CA
  supervisor: Michelle Clark
  parentId: 15

- id: 29
  name: Isabella Perez
  title: Data Analyst
  department: Technology
  email: isabella.perez@company.com
  phone: +1 (555) 100-0029
  location: Seattle, WA
  supervisor: Samantha Walker
  parentId: 17

- id: 30
  name: Nathan Roberts
  title: Marketing Coordinator
  department: Marketing
  email: nathan.roberts@company.com
  phone: +1 (555) 100-0030
  location: Austin, TX
  supervisor: Justin Scott
  parentId: 22
`;

        function initializeYChartEditor() {
            console.log('üöÄ Initializing YChart Editor...');
            
            // Initialize YChart Editor with beautiful configuration
            const editor = new window.YChartEditor({
                nodeWidth: 250,
                nodeHeight: 120,
                editorTheme: 'dark',
                collapsible: true,
                toolbarPosition: 'bottomleft',
                toolbarOrientation: 'horizontal'
            });

            // Setup the editor
            editor
                .initView('ychart-container', yamlData)
                .bgPatternStyle('dotted')
                .actionBtnPos('bottomleft', 'horizontal');

            console.log('‚úÖ YChart Editor initialized successfully!');
            console.log('üí° Tips:');
            console.log('   - Click nodes to view details');
            console.log('   - Use toolbar buttons to expand/collapse, export, etc.');
            console.log('   - Edit YAML in the right panel to update the chart');
            console.log('   - Drag nodes to pan, scroll to zoom');
            
            // Make it accessible globally
            window.ychartEditor = editor;
            
            // Auto-fit after a short delay
            setTimeout(() => {
                if (editor && editor.orgChart) {
                    console.log('üìê Auto-fitting chart to viewport...');
                }
            }, 500);
        }
        
        // Initialize when page loads
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeYChartEditor);
        } else {
            initializeYChartEditor();
        }
    </script>
</body>
</html>
